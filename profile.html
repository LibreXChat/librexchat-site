<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Мой профиль — LibreXChat</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <style>
    body { background-color: #0d0c1d; color: white; font-family: 'Segoe UI', sans-serif; }
    .glow-box { border: 2px solid #00f0ff; border-radius: 10px; box-shadow: 0 0 15px #00f0ff; padding: 20px; }
    .glow-green { border: 2px solid #00ff9d; border-radius: 10px; box-shadow: 0 0 15px #00ff9d; padding: 20px; }
    .button-purple { background-color: #762ef7; transition: background 0.3s; }
    .button-purple:hover { background-color: #5b23bd; }
    .button-red { background-color: #e53935; transition: background 0.3s; }
    .button-red:hover { background-color: #c62828; }
    #lang-switch { position: fixed; bottom: 10px; left: 15px; background: #3f3f46; padding: 6px 14px; border-radius: 8px; cursor: pointer; font-size: 14px; }
    #logout-btn { position: fixed; top: 10px; right: 15px; background: #e53935; padding: 6px 14px; border-radius: 8px; cursor: pointer; font-size: 14px; }
    #infoBox { position: fixed; top: 20px; right: 20px; background: rgba(0,0,0,0.8); color: white; padding: 10px 20px; border-radius: 12px; opacity: 0; transition: opacity 0.5s; font-size: 14px; z-index: 9999; }
    .fade-in { animation: fadeIn 1s ease-in-out; }
    @keyframes fadeIn { from {opacity: 0;} to {opacity: 1;} }
  </style>
</head>
<body class="fade-in">

<div id="infoBox"></div>
<div id="lang-switch" onclick="switchLanguage()">RU | EN</div>
<div id="logout-btn" onclick="logout()">Выйти</div>

<main class="max-w-7xl mx-auto py-10 px-4">
  <h1 class="text-4xl font-bold text-center mb-10" id="profile-title">Мой профиль</h1>
  <div class="grid grid-cols-1 md:grid-cols-3 gap-10">

    <div class="space-y-4">
      <button class="w-full py-3 rounded button-purple" id="btn-profile">Данные профиля</button>
      <button class="w-full py-3 rounded button-purple" id="btn-characters">Персонажи</button>
      <button class="w-full py-3 rounded button-purple" id="btn-upload">Мой центр загрузок</button>
      <button class="w-full py-3 rounded bg-purple-800 cursor-not-allowed" id="btn-faction">Фракция</button>
      <button class="w-full py-3 rounded button-red" id="btn-delete">Удаление профиля</button>
    </div>

    <div class="glow-box">
      <div class="space-y-3 text-lg">
        <div><strong id="label-email">Email:</strong> <span id="email">...</span></div>
        <div><strong id="label-balance">Счёт:</strong> <span id="balance">Ожидание данных...</span></div>
        <div><strong id="label-characters">Персонажи:</strong> <span id="characters">Ожидание данных...</span></div>
        <div><strong id="label-registration">Дата регистрации:</strong> <span id="registration">...</span></div>
        <div><strong id="label-playtime">Время в игре:</strong> <span id="playtime">Ожидание сервера...</span></div>
      </div>
    </div>

    <div class="glow-green">
      <div class="space-y-4">
        <button class="w-full py-3 rounded button-purple" onclick="changeEmail()">Сменить Email</button>
        <button class="w-full py-3 rounded button-purple" onclick="changePassword()">Сменить пароль</button>
        <button class="w-full py-3 rounded button-purple" onclick="resetPassword()">Восстановление</button>
      </div>
    </div>

  </div>

  <div class="text-center text-xs text-gray-400 mt-10">
    © 2025 LibreXChat. Проект создан для всех без исключения.
  </div>
</main>

<script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-auth-compat.js"></script>
<script>
const firebaseConfig = { /* ТВОЙ КОНФИГ */ };
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();

function showInfo(message, error = false) {
  const box = document.getElementById('infoBox');
  box.textContent = message;
  box.style.background = error ? 'rgba(255,0,0,0.8)' : 'rgba(0,128,0,0.8)';
  box.style.opacity = 1;
  setTimeout(() => box.style.opacity = 0, 4000);
}

function logout() {
  auth.signOut().then(() => { window.location.href = 'login.html'; });
}

auth.onAuthStateChanged(user => {
  if (user) {
    document.getElementById('email').textContent = user.email || 'Нет данных';
    document.getElementById('registration').textContent = user.metadata?.creationTime.split('T')[0] || 'Нет данных';
  } else {
    window.location.href = 'login.html';
  }
});

function changeEmail() {
  const newEmail = prompt('Введите новый Email:');
  if (newEmail) {
    auth.currentUser.verifyBeforeUpdateEmail(newEmail)
      .then(() => showInfo('Письмо отправлено для подтверждения нового email.'))
      .catch(e => showInfo('Ошибка: ' + e.message, true));
  }
}

function changePassword() {
  auth.sendPasswordResetEmail(auth.currentUser.email)
    .then(() => showInfo('Письмо для смены пароля отправлено.'))
    .catch(e => showInfo('Ошибка: ' + e.message, true));
}

function resetPassword() {
  changePassword();
}

let currentLang = localStorage.getItem('lang') || 'ru';
function switchLanguage() {
  currentLang = currentLang === 'ru' ? 'en' : 'ru';
  localStorage.setItem('lang', currentLang);
  applyTranslations();
}

function applyTranslations() {
  const t = {
    ru: { profile: 'Мой профиль', email: 'Email:', balance: 'Счёт:', characters: 'Персонажи:', registration: 'Дата регистрации:', playtime: 'Время в игре:' },
    en: { profile: 'My Profile', email: 'Email:', balance: 'Balance:', characters: 'Characters:', registration: 'Registration Date:', playtime: 'Playtime:' }
  };

  const lang = t[currentLang];

  document.getElementById('profile-title').textContent = lang.profile;
  document.getElementById('label-email').textContent = lang.email;
  document.getElementById('label-balance').textContent = lang.balance;
  document.getElementById('label-characters').textContent = lang.characters;
  document.getElementById('label-registration').textContent = lang.registration;
  document.getElementById('label-playtime').textContent = lang.playtime;
}

applyTranslations();
</script>

</body>
</html>
